!! options
version=2
!! end

!! article
Test
!! text
Prevent red links in parser tests
!! end

!! article
Template:Wish
!! text
This is a test template for parser tests
!! end

!! test
Empty wish parser tag
!! wikitext
{{#CommunityRequests: wish}}
!! html
!! end

!! test
Example wish
!! options
title=Community_Wishlist/Wishes/W1
!! wikitext
{{#CommunityRequests: wish
|title = Test Wish
|status = prioritized
|type = change
|audience = Example audience
|projects = commons,wikisource
|otherproject = Some other project
|phabtasks = T123,T456
|created = 2023-10-01T12:00:00Z
|proposer = Admin
|baselang = en
|description = This is a [[test]] {{wish}}.}}
!! html
<div class="ext-communityrequests-wish"><div class="mw-heading mw-heading2 ext-communityrequests-wish--heading"><span class="ext-communityrequests-wish--title">Test Wish</span><span class="cdx-info-chip ext-communityrequests-wish--status"><span class="cdx-info-chip__text">Prioritized</span></span></div><div class="mw-heading mw-heading3">Description</div><div class="ext-communityrequests-wish--description">
<p>This is a <a href="/wiki/Test" title="Test">test</a> This is a test template for parser tests.
</p>
</div><div class="mw-heading mw-heading3">Assigned focus area</div><div class="ext-communityrequests-wish--focus-area">
<p>Unassigned
</p>
</div><div class="mw-heading mw-heading3">Type of wish</div><p class="ext-communityrequests-wish--wish-type">System change</p><div class="mw-heading mw-heading3">Related projects</div><p class="ext-communityrequests-wish--projects">Wikimedia Commons, Wikisource</p><p class="ext-communityrequests-wish--other-project">Some other project</p><div class="mw-heading mw-heading3">Affected users</div><p class="ext-communityrequests-wish--audience">Example audience</p><div class="mw-heading mw-heading3">Phabricator tasks</div><div class="ext-communityrequests-wish--phabtasks">
<p><a href="http://example.org/wiki/phab:T123" class="extiw" title="phab:T123">T123</a>, <a href="http://example.org/wiki/phab:T456" class="extiw" title="phab:T456">T456</a>
</p>
</div><div class="mw-heading mw-heading3">Other details</div><ul><li class="ext-communityrequests-wish--created">Created: 12:00, 1 October 2023</li><li class="ext-communityrequests-wish--updated">Last updated: 00:02, 1 January 1970</li><li class="ext-communityrequests-wish--proposer">Author: <a href="/index.php?title=User:Admin&amp;action=edit&amp;redlink=1" class="new" title="User:Admin (page does not exist)">Admin</a> (<a href="/index.php?title=User_talk:Admin&amp;action=edit&amp;redlink=1" class="new" title="User talk:Admin (page does not exist)">talk</a>)</li></ul><div class="mw-heading mw-heading2" id="Voting">Voting</div><div class="ext-communityrequests-wish--voting"><p>This wish currently has <b>0 supporters</b>. Voting for this wish is open until it is completed. Show your support using the button below.</p><div class="ext-communityrequests-voting-btn"></div></div></div>
!! end

!! test
Example wish with declined status
!! options
title=Community_Wishlist/Wishes/W2
!! wikitext
{{#CommunityRequests: wish
|title = Test Wish with Voting Disabled
|status = declined
|type = change
|audience = Example audience
|projects = commons,wikisource
|otherproject = Some other project
|phabtasks = T123,T456
|created = 2023-10-01T12:00:00Z
|proposer = Admin
|baselang = en
|description = This is a wish without voting.}}
!! html
<div class="ext-communityrequests-wish"><div class="mw-heading mw-heading2 ext-communityrequests-wish--heading"><span class="ext-communityrequests-wish--title">Test Wish with Voting Disabled</span><span class="cdx-info-chip ext-communityrequests-wish--status"><span class="cdx-info-chip__text">Declined</span></span></div><div class="mw-heading mw-heading3">Description</div><div class="ext-communityrequests-wish--description">
<p>This is a wish without voting.
</p>
</div><div class="mw-heading mw-heading3">Assigned focus area</div><div class="ext-communityrequests-wish--focus-area">
<p>Unassigned
</p>
</div><div class="mw-heading mw-heading3">Type of wish</div><p class="ext-communityrequests-wish--wish-type">System change</p><div class="mw-heading mw-heading3">Related projects</div><p class="ext-communityrequests-wish--projects">Wikimedia Commons, Wikisource</p><p class="ext-communityrequests-wish--other-project">Some other project</p><div class="mw-heading mw-heading3">Affected users</div><p class="ext-communityrequests-wish--audience">Example audience</p><div class="mw-heading mw-heading3">Phabricator tasks</div><div class="ext-communityrequests-wish--phabtasks">
<p><a href="http://example.org/wiki/phab:T123" class="extiw" title="phab:T123">T123</a>, <a href="http://example.org/wiki/phab:T456" class="extiw" title="phab:T456">T456</a>
</p>
</div><div class="mw-heading mw-heading3">Other details</div><ul><li class="ext-communityrequests-wish--created">Created: 12:00, 1 October 2023</li><li class="ext-communityrequests-wish--updated">Last updated: 00:02, 1 January 1970</li><li class="ext-communityrequests-wish--proposer">Author: <a href="/index.php?title=User:Admin&amp;action=edit&amp;redlink=1" class="new" title="User:Admin (page does not exist)">Admin</a> (<a href="/index.php?title=User_talk:Admin&amp;action=edit&amp;redlink=1" class="new" title="User talk:Admin (page does not exist)">talk</a>)</li></ul><div class="mw-heading mw-heading2" id="Voting">Voting</div><div class="ext-communityrequests-wish--voting"><p>This wish currently has <b>0 supporters</b>. Supporting this wish is currently disabled.</p></div></div>
!! end

!! test
Example wish with done status
!! options
title=Community_Wishlist/Wishes/W2
!! wikitext
{{#CommunityRequests: wish
|title = Test Wish with Voting Disabled
|status = done
|type = change
|audience = Example audience
|projects = commons,wikisource
|otherproject = Some other project
|phabtasks = T123,T456
|created = 2023-10-01T12:00:00Z
|proposer = Admin
|baselang = en
|description = This is a wish without voting.}}
!! html
<div class="ext-communityrequests-wish"><div class="mw-heading mw-heading2 ext-communityrequests-wish--heading"><span class="ext-communityrequests-wish--title">Test Wish with Voting Disabled</span><span class="cdx-info-chip ext-communityrequests-wish--status cdx-info-chip--success"><span class="cdx-info-chip__text">Done</span></span></div><div class="mw-heading mw-heading3">Description</div><div class="ext-communityrequests-wish--description">
<p>This is a wish without voting.
</p>
</div><div class="mw-heading mw-heading3">Assigned focus area</div><div class="ext-communityrequests-wish--focus-area">
<p>Unassigned
</p>
</div><div class="mw-heading mw-heading3">Type of wish</div><p class="ext-communityrequests-wish--wish-type">System change</p><div class="mw-heading mw-heading3">Related projects</div><p class="ext-communityrequests-wish--projects">Wikimedia Commons, Wikisource</p><p class="ext-communityrequests-wish--other-project">Some other project</p><div class="mw-heading mw-heading3">Affected users</div><p class="ext-communityrequests-wish--audience">Example audience</p><div class="mw-heading mw-heading3">Phabricator tasks</div><div class="ext-communityrequests-wish--phabtasks">
<p><a href="http://example.org/wiki/phab:T123" class="extiw" title="phab:T123">T123</a>, <a href="http://example.org/wiki/phab:T456" class="extiw" title="phab:T456">T456</a>
</p>
</div><div class="mw-heading mw-heading3">Other details</div><ul><li class="ext-communityrequests-wish--created">Created: 12:00, 1 October 2023</li><li class="ext-communityrequests-wish--updated">Last updated: 00:02, 1 January 1970</li><li class="ext-communityrequests-wish--proposer">Author: <a href="/index.php?title=User:Admin&amp;action=edit&amp;redlink=1" class="new" title="User:Admin (page does not exist)">Admin</a> (<a href="/index.php?title=User_talk:Admin&amp;action=edit&amp;redlink=1" class="new" title="User talk:Admin (page does not exist)">talk</a>)</li></ul><div class="mw-heading mw-heading2" id="Voting">Voting</div><div class="ext-communityrequests-wish--voting"><p>This wish currently has <b>0 supporters</b>. Supporting this wish is currently disabled.</p></div></div>
!! end

!! test
Missing proposer and created timestamp
!! options
title=Community_Wishlist/Wishes/W3
!! wikitext
{{#CommunityRequests: wish
|title = Wish without proposer
|status = under-review
|type = change
|audience = Example audience
|projects = commons,wikisource
|otherproject = Some other project
|phabtasks = T123,T456
|baselang = en
|description = This is a wish without a proposer or created timestamp.}}
!! html
<p class="error">Missing required fields: created, proposer</p>
!! end

!! test
Example wish in Hebrew and with no tasks
!! options
title=Community_Wishlist/Wishes/W4
language=he
!! wikitext
{{#CommunityRequests: wish
|title = משאלת מבחן (Hebrew)
|status = submitted
|type = change
|audience = קהל לדוגמה
|projects = commons,wikisource
|otherproject = פרויקט אחר כלשהו
|created = 2023-10-01T12:00:00Z
|proposer = Admin
|baselang = he
|description = זהו [[test]] {{wish}}}}
!! html
<div class="ext-communityrequests-wish"><div class="mw-heading mw-heading2 ext-communityrequests-wish--heading"><span class="ext-communityrequests-wish--title">משאלת מבחן (Hebrew)</span><span class="cdx-info-chip ext-communityrequests-wish--status"><span class="cdx-info-chip__text">מצב לא ידוע</span></span></div><div class="mw-heading mw-heading3">תיאור</div><div class="ext-communityrequests-wish--description">
<p>זהו <a href="/wiki/Test" title="Test">test</a> This is a test template for parser tests
</p>
</div><div class="mw-heading mw-heading3">תחום מיקוד מוקצה</div><div class="ext-communityrequests-wish--focus-area">
<p>לא מוקצות
</p>
</div><div class="mw-heading mw-heading3">סוג המשאלה</div><p class="ext-communityrequests-wish--wish-type">שינוי מערכת</p><div class="mw-heading mw-heading3">מיזמים קשורים</div><p class="ext-communityrequests-wish--projects">ויקישיתוף, ויקיטקסט</p><p class="ext-communityrequests-wish--other-project">פרויקט אחר כלשהו</p><div class="mw-heading mw-heading3">משתמשים מושפעים</div><p class="ext-communityrequests-wish--audience">קהל לדוגמה</p><div class="mw-heading mw-heading3">פרטים נוספים</div><ul><li class="ext-communityrequests-wish--created">נוצרה: 12:00, 1 באוקטובר 2023</li><li class="ext-communityrequests-wish--updated">עודכנה לאחרונה: 00:02, 1 בינואר 1970</li><li class="ext-communityrequests-wish--proposer">מאת: <a href="/index.php?title=%D7%9E%D7%A9%D7%AA%D7%9E%D7%A9:Admin&amp;action=edit&amp;redlink=1" class="new" title="User:Admin (הדף אינו קיים)">Admin</a> (<a href="/index.php?title=%D7%A9%D7%99%D7%97%D7%AA_%D7%9E%D7%A9%D7%AA%D7%9E%D7%A9:Admin&amp;action=edit&amp;redlink=1" class="new" title="User talk:Admin (הדף אינו קיים)">שיחה</a>)</li></ul><div class="mw-heading mw-heading2" id="Voting">הצבעה</div><div class="ext-communityrequests-wish--voting"><p>This wish currently has <b>0 supporters</b>. Supporting this wish is currently disabled.</p></div></div>
!! end
